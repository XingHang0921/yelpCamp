<% layout('layouts/boilerplate')%>
<div class="pb-5" id="map" style="width: 100%; height: 500px"></div>


<% for(let c of campgrounds) { %>
        <div class="card mb-3">
            <div class="row">
                <div class="col-md-4">
                    <img class="img-fluid" alt="" src="<%= c.images[0].url %>">
                </div>
                <div class="col-md-8">
                    <div class="card-body">
                        <h5 class="card-title">
                            <%=c.title%>
                        </h5>
                        <h5 class="card-text">
                            <%=c.description%>
                        </h5>
                        <h5 class="card-text">
                            <small class="text-muted">
                                <%=c.location%>
                            </small>       
                        </h5>
                        <a href="/campgrounds/<%=c.id%>"class='btn btn-primary'>View <%=c.title%></a>
                    </div>
                </div>
            </div>
        </div>
<%}%>
<%- "<script>" %>
const maptilerApiKey = "<%- process.env.MAPTILER_API_KEY %>";
const campgrounds = {
  type: "FeatureCollection",
  features: <%- JSON.stringify(
    campgrounds.map(campground => ({
      type: "Feature",
      geometry: campground.geometry,
      properties: { popUpMarkup: campground?.properties?.popUpMarkup }
    }))
  ) %>
};
<%- "</script>" %>

<script src="/javascripts/clusterMap.js"></script>